<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Par√°metros de Agua - Sistema Pisc√≠cola</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-right: 15px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tab.active {
            border-bottom-color: #17a2b8;
            background: #f0f9ff;
        }

        .tab-content {
            background: white;
            padding: 30px;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            min-height: 700px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .form-container {
            max-width: 900px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .parameter-info {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: #fff;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #17a2b8;
            box-shadow: 0 0 0 3px rgba(23, 162, 184, 0.1);
        }

        .parameter-warning {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 13px;
            display: none;
        }

        .parameter-danger {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 13px;
            display: none;
        }

        .parameter-good {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 13px;
            display: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(23, 162, 184, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border-left: 4px solid #17a2b8;
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #17a2b8;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .parameter-card {
            background: white;
            border: 1px solid #e1e5e9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .parameter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .parameter-name {
            font-weight: 600;
            font-size: 16px;
            color: #333;
        }

        .parameter-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-optimal {
            background: #d4edda;
            color: #155724;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-critical {
            background: #f8d7da;
            color: #721c24;
        }

        .parameter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .parameter-item {
            text-align: center;
        }

        .parameter-value {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .parameter-unit {
            font-size: 12px;
            color: #666;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e5e9;
            font-size: 14px;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #555;
        }

        .data-table tbody tr:hover {
            background: #f0f9ff;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            color: #495057;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .quick-btn:hover {
            background: #17a2b8;
            color: white;
            border-color: #17a2b8;
        }

        .alert-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .alert-title {
            font-weight: 600;
            color: #856404;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }

            .quick-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>
            <button class="back-btn" onclick="goBack()">‚Üê Volver</button>
            üåä Par√°metros de Calidad del Agua
        </h1>
    </div>

    <div class="container">
        <!-- Estad√≠sticas -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">12</div>
                <div class="stat-label">Estanques monitoreados</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">85%</div>
                <div class="stat-label">Par√°metros √≥ptimos</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3</div>
                <div class="stat-label">Alertas activas</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">24¬∞C</div>
                <div class="stat-label">Temperatura promedio</div>
            </div>
        </div>

        <!-- Alertas -->
        <div class="alert-section">
            <div class="alert-title">üö® Alertas Activas</div>
            <div>
                ‚Ä¢ Estanque E003: pH bajo (6.2) - Requiere atenci√≥n<br>
                ‚Ä¢ Estanque E007: Ox√≠geno disuelto cr√≠tico (3.1 mg/L)<br>
                ‚Ä¢ Estanque E010: Amonio elevado (0.8 mg/L)
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <div class="tab active" onclick="showTab(event, 'registro-parametros')">Registrar Par√°metros</div>
            <div class="tab" onclick="showTab(event, 'monitoreo-tiempo-real')">Monitoreo</div>
            <div class="tab" onclick="showTab(event, 'historial')">Historial</div>
            <div class="tab" onclick="showTab(event, 'analisis')">An√°lisis</div>
        </div>

        <div class="tab-content">
            <!-- Registro de Par√°metros -->
            <div class="tab-pane active" id="registro-parametros">
                <h3 style="margin-bottom: 25px; color: #333;">Registrar Nuevos Par√°metros</h3>
                
                <div class="quick-actions">
                    <button class="quick-btn" onclick="llenarDatosPrueba()">Datos de Prueba</button>
                    <button class="quick-btn" onclick="copiarUltimos()">Copiar √öltimos Valores</button>
                    <button class="quick-btn" onclick="verificarRangos()">Verificar Rangos √ìptimos</button>
                </div>

                <div class="form-container">
                    <form id="parametrosForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="estanque">Estanque *</label>
                                <select id="estanque" name="id_estanque" required onchange="cargarUltimosParametros()">
                                    <option value="">Seleccionar estanque</option>
                                    <option value="1">E001 - Estanque Principal (Tierra)</option>
                                    <option value="2">E002 - Estanque Norte (Concreto)</option>
                                    <option value="3">E003 - Jaula Flotante A</option>
                                    <option value="4">E004 - Estanque Sur (Tierra)</option>
                                    <option value="5">E005 - Tanque Circular</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="fecha_medicion">Fecha y Hora de Medici√≥n *</label>
                                <input type="datetime-local" id="fecha_medicion" name="fecha" required>
                                <div class="parameter-info">Registre la hora exacta de la medici√≥n</div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="temperatura">Temperatura (¬∞C) *</label>
                                <input type="number" step="0.1" id="temperatura" name="temperatura" 
                                       min="0" max="50" required onchange="validarTemperatura()">
                                <div class="parameter-info">Rango √≥ptimo: 22-28¬∞C para la mayor√≠a de especies</div>
                                <div id="temp-warning" class="parameter-warning"></div>
                            </div>
                            <div class="form-group">
                                <label for="ph">pH *</label>
                                <input type="number" step="0.1" id="ph" name="ph" 
                                       min="0" max="14" required onchange="validarPH()">
                                <div class="parameter-info">Rango √≥ptimo: 6.5-8.5</div>
                                <div id="ph-warning" class="parameter-warning"></div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="oxigeno">Ox√≠geno Disuelto (mg/L) *</label>
                                <input type="number" step="0.1" id="oxigeno" name="oxigeno" 
                                       min="0" required onchange="validarOxigeno()">
                                <div class="parameter-info">M√≠nimo requerido: 4 mg/L, √≥ptimo: >6 mg/L</div>
                                <div id="oxigeno-warning" class="parameter-warning"></div>
                            </div>
                            <div class="form-group">
                                <label for="amonio">Amonio (mg/L)</label>
                                <input type="number" step="0.01" id="amonio" name="amonio" 
                                       min="0" onchange="validarAmonio()">
                                <div class="parameter-info">M√°ximo recomendado: 0.5 mg/L</div>
                                <div id="amonio-warning" class="parameter-warning"></div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="nitritos">Nitritos (mg/L)</label>
                                <input type="number" step="0.01" id="nitritos" name="nitritos" 
                                       min="0" onchange="validarNitritos()">
                                <div class="parameter-info">M√°ximo recomendado: 0.3 mg/L</div>
                                <div id="nitritos-warning" class="parameter-warning"></div>
                            </div>
                            <div class="form-group">
                                <label for="turbidez">Turbidez (NTU)</label>
                                <input type="number" step="0.1" id="turbidez" name="turbidez" 
                                       min="0" onchange="validarTurbidez()">
                                <div class="parameter-info">√ìptimo: 20-50 NTU</div>
                                <div id="turbidez-warning" class="parameter-warning"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="observaciones">Observaciones</label>
                            <textarea id="observaciones" name="observacion" rows="4" 
                                      placeholder="Condiciones clim√°ticas, comportamiento de los peces, color del agua, etc."></textarea>
                        </div>

                        <div style="padding-top: 20px; border-top: 1px solid #e1e5e9;">
                            <button type="submit" class="btn-primary">Registrar Par√°metros</button>
                            <button type="reset" class="btn-secondary" onclick="limpiarFormulario()">Limpiar</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Monitoreo en Tiempo Real -->
            <div class="tab-pane" id="monitoreo-tiempo-real">
                <h3 style="margin-bottom: 25px; color: #333;">Monitoreo en Tiempo Real</h3>
                
                <div class="parameter-card">
                    <div class="parameter-header">
                        <span class="parameter-name">Estanque E001 - Principal</span>
                        <span class="parameter-status status-optimal">√ìptimo</span>
                    </div>
                    <div class="parameter-grid">
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #28a745;">24.5</div>
                            <div class="parameter-unit">¬∞C</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #28a745;">7.2</div>
                            <div class="parameter-unit">pH</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #28a745;">6.8</div>
                            <div class="parameter-unit">mg/L O‚ÇÇ</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #28a745;">0.3</div>
                            <div class="parameter-unit">mg/L NH‚ÇÉ</div>
                        </div>
                    </div>
                </div>

                <div class="parameter-card">
                    <div class="parameter-header">
                        <span class="parameter-name">Estanque E002 - Norte</span>
                        <span class="parameter-status status-warning">Advertencia</span>
                    </div>
                    <div class="parameter-grid">
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #ffc107;">29.2</div>
                            <div class="parameter-unit">¬∞C</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #28a745;">7.8</div>
                            <div class="parameter-unit">pH</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #28a745;">5.9</div>
                            <div class="parameter-unit">mg/L O‚ÇÇ</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #ffc107;">0.6</div>
                            <div class="parameter-unit">mg/L NH‚ÇÉ</div>
                        </div>
                    </div>
                </div>

                <div class="parameter-card">
                    <div class="parameter-header">
                        <span class="parameter-name">Jaula E003 - Flotante A</span>
                        <span class="parameter-status status-critical">Cr√≠tico</span>
                    </div>
                    <div class="parameter-grid">
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #28a745;">23.1</div>
                            <div class="parameter-unit">¬∞C</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #dc3545;">6.1</div>
                            <div class="parameter-unit">pH</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #dc3545;">3.2</div>
                            <div class="parameter-unit">mg/L O‚ÇÇ</div>
                        </div>
                        <div class="parameter-item">
                            <div class="parameter-value" style="color: #dc3545;">0.9</div>
                            <div class="parameter-unit">mg/L NH‚ÇÉ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Historial -->
            <div class="tab-pane" id="historial">
                <h3 style="margin-bottom: 25px; color: #333;">Historial de Mediciones</h3>
                
                <div class="form-grid" style="margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="filtro_estanque">Filtrar por Estanque</label>
                        <select id="filtro_estanque">
                            <option value="">Todos los estanques</option>
                            <option value="1">E001 - Principal</option>
                            <option value="2">E002 - Norte</option>
                            <option value="3">E003 - Jaula A</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filtro_fecha_inicio">Desde</label>
                        <input type="date" id="filtro_fecha_inicio">
                    </div>
                    <div class="form-group">
                        <label for="filtro_fecha_fin">Hasta</label>
                        <input type="date" id="filtro_fecha_fin">
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Fecha/Hora</th>
                                <th>Estanque</th>
                                <th>Temp (¬∞C)</th>
                                <th>pH</th>
                                <th>O‚ÇÇ (mg/L)</th>
                                <th>NH‚ÇÉ (mg/L)</th>
                                <th>NO‚ÇÇ (mg/L)</th>
                                <th>Turbidez</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>17/09/2025 08:30</td>
                                <td>E001</td>
                                <td>24.5</td>
                                <td>7.2</td>
                                <td>6.8</td>
                                <td>0.3</td>
                                <td>0.1</td>
                                <td>25.0</td>
                                <td><span class="parameter-status status-optimal">√ìptimo</span></td>
                            </tr>
                            <tr>
                                <td>17/09/2025 08:45</td>
                                <td>E002</td>
                                <td>29.2</td>
                                <td>7.8</td>
                                <td>5.9</td>
                                <td>0.6</td>
                                <td>0.2</td>
                                <td>30.5</td>
                                <td><span class="parameter-status status-warning">Advertencia</span></td>
                            </tr>
                            <tr>
                                <td>17/09/2025 09:00</td>
                                <td>E003</td>
                                <td>23.1</td>
                                <td>6.1</td>
                                <td>3.2</td>
                                <td>0.9</td>
                                <td>0.4</td>
                                <td>45.2</td>
                                <td><span class="parameter-status status-critical">Cr√≠tico</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- An√°lisis -->
            <div class="tab-pane" id="analisis">
                <h3 style="margin-bottom: 25px; color: #333;">An√°lisis y Tendencias</h3>
                
                <div class="form-grid" style="margin-bottom: 30px;">
                    <div class="form-group">
                        <label for="analisis_periodo">Per√≠odo de An√°lisis</label>
                        <select id="analisis_periodo">
                            <option value="7">√öltimos 7 d√≠as</option>
                            <option value="15">√öltimos 15 d√≠as</option>
                            <option value="30">√öltimo mes</option>
                            <option value="90">√öltimos 3 meses</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="analisis_parametro">Par√°metro a Analizar</label>
                        <select id="analisis_parametro">
                            <option value="temperatura">Temperatura</option>
                            <option value="ph">pH</option>
                            <option value="oxigeno">Ox√≠geno Disuelto</option>
                            <option value="amonio">Amonio</option>
                            <option value="nitritos">Nitritos</option>
                        </select>
                    </div>
                </div>

                <button class="btn-primary" onclick="generarAnalisis()">Generar An√°lisis</button>

                <div id="resultado-analisis" style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; display: none;">
                    <h4 style="margin-bottom: 15px;">Resumen del An√°lisis</h4>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">7.2</div>
                            <div class="stat-label">pH Promedio</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">24.8¬∞C</div>
                            <div class="stat-label">Temp. Promedio</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">95%</div>
                            <div class="stat-label">Tiempo en Rango √ìptimo</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">2</div>
                            <div class="stat-label">Alertas Generadas</div>
                        </div>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 8px; margin-top: 20px;">
                        <h5>Recomendaciones:</h5>
                        <ul style="margin-left: 20px; line-height: 1.6;">
                            <li>Incrementar aireaci√≥n en E003 para mejorar ox√≠geno disuelto</li>
                            <li>Monitorear temperatura en E002 durante horas de mayor calor</li>
                            <li>Revisar sistema de filtraci√≥n en estanques con niveles altos de amonio</li>
                            <li>Programar mediciones m√°s frecuentes en estanques cr√≠ticos</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            document.getElementById('fecha_medicion').value = now.toISOString().slice(0, 16);
        });

        // Funci√≥n para cambiar de pesta√±a
        function showTab(evt, tabName) {
            var i, tabcontent, tabs;
            
            tabcontent = document.getElementsByClassName("tab-pane");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            
            tabs = document.getElementsByClassName("tab");
            for (i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove("active");
            }
            
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        function goBack() {
            window.location.href = 'dashboard.html';
        }

        // Validaciones de par√°metros
        function validarTemperatura() {
            const temp = parseFloat(document.getElementById('temperatura').value);
            const warning = document.getElementById('temp-warning');
            
            if (isNaN(temp)) return;
            
            if (temp < 18 || temp > 32) {
                warning.className = 'parameter-danger';
                warning.textContent = 'CR√çTICO: Temperatura fuera del rango seguro (18-32¬∞C)';
                warning.style.display = 'block';
            } else if (temp < 22 || temp > 28) {
                warning.className = 'parameter-warning';
                warning.textContent = 'ADVERTENCIA: Temperatura fuera del rango √≥ptimo (22-28¬∞C)';
                warning.style.display = 'block';
            } else {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì Temperatura en rango √≥ptimo';
                warning.style.display = 'block';
            }
        }

        function validarPH() {
            const ph = parseFloat(document.getElementById('ph').value);
            const warning = document.getElementById('ph-warning');
            
            if (isNaN(ph)) return;
            
            if (ph < 6.0 || ph > 9.0) {
                warning.className = 'parameter-danger';
                warning.textContent = 'CR√çTICO: pH fuera del rango seguro (6.0-9.0)';
                warning.style.display = 'block';
            } else if (ph < 6.5 || ph > 8.5) {
                warning.className = 'parameter-warning';
                warning.textContent = 'ADVERTENCIA: pH fuera del rango √≥ptimo (6.5-8.5)';
                warning.style.display = 'block';
            } else {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì pH en rango √≥ptimo';
                warning.style.display = 'block';
            }
        }

        function validarOxigeno() {
            const oxigeno = parseFloat(document.getElementById('oxigeno').value);
            const warning = document.getElementById('oxigeno-warning');
            
            if (isNaN(oxigeno)) return;
            
            if (oxigeno < 3) {
                warning.className = 'parameter-danger';
                warning.textContent = 'CR√çTICO: Nivel de ox√≠geno peligrosamente bajo (<3 mg/L)';
                warning.style.display = 'block';
            } else if (oxigeno < 4) {
                warning.className = 'parameter-warning';
                warning.textContent = 'ADVERTENCIA: Nivel de ox√≠geno bajo (<4 mg/L)';
                warning.style.display = 'block';
            } else if (oxigeno >= 6) {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì Nivel de ox√≠geno √≥ptimo (‚â•6 mg/L)';
                warning.style.display = 'block';
            } else {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì Nivel de ox√≠geno aceptable';
                warning.style.display = 'block';
            }
        }

        function validarAmonio() {
            const amonio = parseFloat(document.getElementById('amonio').value);
            const warning = document.getElementById('amonio-warning');
            
            if (isNaN(amonio)) return;
            
            if (amonio > 1.0) {
                warning.className = 'parameter-danger';
                warning.textContent = 'CR√çTICO: Nivel de amonio t√≥xico (>1.0 mg/L)';
                warning.style.display = 'block';
            } else if (amonio > 0.5) {
                warning.className = 'parameter-warning';
                warning.textContent = 'ADVERTENCIA: Nivel de amonio elevado (>0.5 mg/L)';
                warning.style.display = 'block';
            } else {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì Nivel de amonio aceptable';
                warning.style.display = 'block';
            }
        }

        function validarNitritos() {
            const nitritos = parseFloat(document.getElementById('nitritos').value);
            const warning = document.getElementById('nitritos-warning');
            
            if (isNaN(nitritos)) return;
            
            if (nitritos > 0.5) {
                warning.className = 'parameter-danger';
                warning.textContent = 'CR√çTICO: Nivel de nitritos t√≥xico (>0.5 mg/L)';
                warning.style.display = 'block';
            } else if (nitritos > 0.3) {
                warning.className = 'parameter-warning';
                warning.textContent = 'ADVERTENCIA: Nivel de nitritos elevado (>0.3 mg/L)';
                warning.style.display = 'block';
            } else {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì Nivel de nitritos aceptable';
                warning.style.display = 'block';
            }
        }

        function validarTurbidez() {
            const turbidez = parseFloat(document.getElementById('turbidez').value);
            const warning = document.getElementById('turbidez-warning');
            
            if (isNaN(turbidez)) return;
            
            if (turbidez > 100 || turbidez < 10) {
                warning.className = 'parameter-warning';
                warning.textContent = 'ADVERTENCIA: Turbidez fuera del rango recomendado (10-100 NTU)';
                warning.style.display = 'block';
            } else if (turbidez >= 20 && turbidez <= 50) {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì Turbidez en rango √≥ptimo (20-50 NTU)';
                warning.style.display = 'block';
            } else {
                warning.className = 'parameter-good';
                warning.textContent = '‚úì Turbidez aceptable';
                warning.style.display = 'block';
            }
        }

        // Funciones auxiliares
        function llenarDatosPrueba() {
            document.getElementById('temperatura').value = '24.5';
            document.getElementById('ph').value = '7.2';
            document.getElementById('oxigeno').value = '6.8';
            document.getElementById('amonio').value = '0.3';
            document.getElementById('nitritos').value = '0.1';
            document.getElementById('turbidez').value = '25.0';
            
            // Ejecutar validaciones
            validarTemperatura();
            validarPH();
            validarOxigeno();
            validarAmonio();
            validarNitritos();
            validarTurbidez();
        }

        function copiarUltimos() {
            alert('Funci√≥n para copiar los √∫ltimos valores registrados del estanque seleccionado');
        }

        function verificarRangos() {
            alert('Rangos √ìptimos:\n‚Ä¢ Temperatura: 22-28¬∞C\n‚Ä¢ pH: 6.5-8.5\n‚Ä¢ Ox√≠geno: >4 mg/L (√≥ptimo >6)\n‚Ä¢ Amonio: <0.5 mg/L\n‚Ä¢ Nitritos: <0.3 mg/L\n‚Ä¢ Turbidez: 20-50 NTU');
        }

        function cargarUltimosParametros() {
            // Simular carga de √∫ltimos par√°metros del estanque seleccionado
        }

        function limpiarFormulario() {
            document.querySelectorAll('.parameter-warning, .parameter-danger, .parameter-good').forEach(elem => {
                elem.style.display = 'none';
            });
        }

        function generarAnalisis() {
            document.getElementById('resultado-analisis').style.display = 'block';
            document.getElementById('resultado-analisis').scrollIntoView({ behavior: 'smooth' });
        }

        // Manejo del formulario
        document.getElementById('parametrosForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const parametros = Object.fromEntries(formData);
            
            if (!parametros.id_estanque || !parametros.fecha || !parametros.temperatura || !parametros.ph || !parametros.oxigeno) {
                alert('Por favor complete todos los campos obligatorios.');
                return;
            }
            
            alert('Par√°metros registrados exitosamente!');
            this.reset();
            
            // Restablecer fecha/hora
            const now = new Date();
            document.getElementById('fecha_medicion').value = now.toISOString().slice(0, 16);
            
            limpiarFormulario();
        });
    </script>
</body>
</html>